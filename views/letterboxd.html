{{ define "card" }}
<div id="{{ .Metadata.Position }}" hx-swap-oob="true" class="h-full w-full p-2">
    <div class="h-full w-full grid grid-rows-[22%_78%] px-4 py-5 bg-black bg-opacity-10 backdrop-blur rounded-2xl">
        <div class="flex space-x-3 mb-4">
            <img src="/images/modules/{{ .Metadata.Icon }}/icon.png" alt="icon_{{ .Metadata.Icon }}" class="h-8 w-8">
            <h2 class="font-bold text-lg text-white">Letterboxd</h2>
        </div>

        <div class="flex space-x-2 h-full items-center">
            {{ range .MovieData }}
            {{ block "movie-card" . }}{{ end }}
            {{ end }}
        </div>

    </div>
</div>
{{end}}

{{ define "movie-card" }}
<div id="movie-card-{{.Id}}" >
    <div class="rounded-lg overflow-hidden relative">
        <img src="{{ .Poster }}" alt="poster_movie_{{ .Id }}">
        <div class="absolute h-6 bg-black bg-opacity-25 backdrop-blur bottom-0 left-0 w-full flex space-x-1 items-center px-1">
            <img src="{{ .OwnerAvatar }}" alt="avatar_{{ .OwnerAvatar }}" class="h-5 w-5 rounded-full">
            <p class="text-white text-[10px] font-bold max-w-full overflow-ellipsis whitespace-nowrap">{{ .Owner }}</p>
        </div>        
    </div>
    <p class="text-sm text-white mt-1">{{ .Rating }}</p>
    
</div>
{{ end }}